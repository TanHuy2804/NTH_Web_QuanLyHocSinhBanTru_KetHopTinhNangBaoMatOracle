@model List<NTH_DBHSBT.Models.KhauPhanAn>
@{
    ViewBag.Title = "IndexKAP";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
}
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.8/dist/sweetalert2.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<style>
    .tieude {
        text-align: center;
        margin-top: 30px;
    }

    .table {
        width: 100%;
        border-collapse: collapse;
        border: 3px solid #ddd; /* Khung viền cho bảng */
    }

        .table th, .table td {
            padding: 8px;
            text-align: center; /* Căn giữa chữ trong ô */
            border-bottom: 1px solid #ddd; /* Đường kẻ ngang giữa các dòng */
            border-right: 1px solid #ddd; /* Đường kẻ dọc giữa các ô */
        }

        .table th {
            background-color: #0d6efd; /* Màu nền cho tiêu đề cột */
        }

        .table tbody tr:last-child td {
            border-bottom: none; /* Loại bỏ đường kẻ ngang ở dòng cuối cùng */
        }

        .table tbody tr td:last-child {
            border-right: none; /* Loại bỏ đường kẻ dọc ở cột cuối cùng */
        }

    .my-popup-class {
        width: 250px;
        height: 200px;
    }

    .my-title-class {
        font-size: 18px;
    }
</style>
<div class="container">

    <h2 class="tieude">DANH SÁCH KHẨU PHẦN ĂN</h2>
    <table class="table table-striped">
        <thead class="">
            <tr class="thead">
                <th>Mã Combo Món</th>
                <th>Loại Combo Món</th>
                <th>Tên Món 1</th>
                <th>Tên Món 2</th>
                <th>Tên Món 3</th>
                <th>Tên Món 4</th>
                <th>Thứ Trong Tuần</th>
                <th>Giá Tiền</th>
                <th>QR Code</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var comBoMon in Model)
            {
                <tr>
                    <td><a class="mma" href="#" data-macombo="@comBoMon.MaComBoMon">@comBoMon.MaComBoMon</a></td>
                    <td>@comBoMon.LoaiComBoMon</td>
                    <td>@comBoMon.TenMon1</td>
                    <td>@comBoMon.TenMon2</td>
                    <td>@comBoMon.TenMon3</td>
                    <td>@comBoMon.TenMon4</td>
                    <td>@comBoMon.ThuTrongTuan</td>
                    <td>@comBoMon.GiaTien</td>
                    <td>@comBoMon.QRCode</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.8/dist/sweetalert2.all.min.js"></script>

<script>
    // Lặp qua từng liên kết "Đăng kí" để gắn sự kiện click
    document.querySelectorAll('.mma').forEach(link => {
        link.addEventListener('click', (event) => {
            //event.preventDefault();
            // Lấy mã combo từ thuộc tính data-macombo của liên kết được nhấn
            var macombo = link.getAttribute('data-macombo');
            // Gọi Ajax hoặc chuyển hướng tới action DangKi của controller với mã combo
            $.ajax({
                url: '@Url.Action("DangKi", "DangKiKhauPhanAn")',
                type: 'GET',
                data: { macombo: macombo },
                success: function(result) {
                    if (result === "success") {
                        Swal.fire({
                            position: "center",
                            icon: "success",
                            title: "Đăng kí thành công",
                            showConfirmButton: false,
                            timer: 2000,
                            customClass: {
                                popup: 'my-popup-class',
                                title: 'my-title-class'
                            }
                        });
                    }
                    else {
                        Swal.fire({
                            position: "center",
                            icon: "error",
                            title: "Lỗi đăng kí",
                            showConfirmButton: false,
                            timer: 2000,
                            customClass: {
                                popup: 'my-popup-class',
                                title: 'my-title-class'
                            }
                        });
                    }
                },
            });
        });
    });
</script>

